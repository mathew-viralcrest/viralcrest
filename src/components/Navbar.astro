---
const navLinks = [
  { name: "Home", href: "/" },
  { name: "About", href: "/about" },
  {
    name: "Service",
    href: "/services",
    dropdown: [
      {
        name: "Performance Marketing",
        href: "/services/performance-marketing",
      },

      { name: "Website Development", href: "/services/website-development" },
      {
        name: "Ecommerce Development",
        href: "/services/ecommerce-development",
      },
      { name: "AI Content Creation", href: "/services/ai-content-creation" },
      {
        name: "Social Media Marketing",
        href: "/services/social-media-marketing",
      },
      { name: "SEO Optimization", href: "/services/seo-optimization" },
      { name: "WhatsApp Automation", href: "/services/whatsapp-automation" },
      { name: "Branding & Design", href: "/services/branding-design" },
    ],
  },
  { name: "Blog", href: "#blog" },
];
---

<nav
  id="main-navbar"
  class="fixed top-0 left-0 w-full z-50 transition-all duration-300 bg-transparent backdrop-blur-none padding-4 border-b border-slate-900/5"
>
  <div class="container mx-auto px-6 h-20 flex items-center justify-between">
    <!-- Logo -->
    <a href="/" class="block">
      <img src="/logo.png" alt="Viralcrest" class="h-10 w-auto" />
    </a>

    <!-- Desktop Navigation (Centered) -->
    <ul
      class="hidden md:flex items-center gap-10 absolute left-1/2 -translate-x-1/2"
    >
      {
        navLinks.map((link) => (
          <li class="relative group h-20 flex items-center">
            <a
              href={link.href}
              class="text-base font-medium text-slate-600 hover:text-[#5057e6] transition-colors flex items-center gap-1"
            >
              {link.name}
              {link.dropdown && (
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="group-hover:rotate-180 transition-transform duration-300"
                >
                  <path d="m6 9 6 6 6-6" />
                </svg>
              )}
            </a>

            {/* Dropdown Menu */}
            {link.dropdown && (
              <div class="absolute top-full left-1/2 -translate-x-1/2 w-64 bg-white shadow-xl rounded-xl border border-slate-100 p-2 opacity-0 invisible translate-y-2 group-hover:opacity-100 group-hover:visible group-hover:translate-y-0 transition-all duration-300 transform origin-top">
                <div class="absolute -top-2 left-0 w-full h-2 bg-transparent" />{" "}
                {/* Bridge to prevent closing on gap */}
                <ul class="flex flex-col">
                  {link.dropdown.map((item) => (
                    <li>
                      <a
                        href={item.href}
                        class="block px-4 py-3 text-sm font-medium text-slate-600 hover:text-[#5057e6] hover:bg-slate-50 rounded-lg transition-colors text-left"
                      >
                        {item.name}
                      </a>
                    </li>
                  ))}
                </ul>
              </div>
            )}
          </li>
        ))
      }
    </ul>

    <!-- CTA & Mobile Menu Toggle -->
    <div class="flex items-center gap-4">
      <a
        href="/contact"
        class="hidden md:inline-flex items-center justify-center px-6 py-2.5 text-sm font-semibold text-[#5057e6] bg-transparent border-2 border-[#5057e6]/30 rounded-full hover:bg-[#5057e6]/10 hover:border-[#5057e6]/50 transition-all gap-2"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="18"
          height="18"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          ><path
            d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
          ></path></svg
        >
        Contact
      </a>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-btn"
        class="md:hidden text-slate-900 p-2 z-50 relative"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-menu"
          ><line x1="4" x2="20" y1="12" y2="12"></line><line
            x1="4"
            x2="20"
            y1="6"
            y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg
        >
      </button>
    </div>
  </div>

  <!-- Mobile Menu Overlay -->
  <div
    id="mobile-menu"
    class="fixed inset-0 bg-white/95 backdrop-blur-md z-40 transform translate-x-full transition-transform duration-300 md:hidden flex flex-col justify-center items-center"
  >
    <ul class="flex flex-col items-center gap-8 text-center p-6">
      {
        navLinks.map((link) => (
          <li>
            <a
              href={link.href}
              class="text-2xl font-bold text-slate-800 hover:text-[#5057e6] transition-colors"
              onclick="document.getElementById('mobile-menu').classList.add('translate-x-full'); document.body.style.overflow = '';"
            >
              {link.name}
            </a>
            {link.dropdown && (
              <div class="mt-4 flex flex-col gap-3 pl-4 border-l-2 border-slate-100">
                {link.dropdown.map((item) => (
                  <a
                    href={item.href}
                    class="text-lg font-medium text-slate-500 hover:text-[#5057e6] transition-colors block py-1"
                  >
                    {item.name}
                  </a>
                ))}
              </div>
            )}
          </li>
        ))
      }
      <li class="mt-8">
        <a
          href="/contact"
          class="inline-flex items-center justify-center px-8 py-4 text-lg font-bold text-white bg-[#5057e6] rounded-full hover:bg-[#4349c2] transition-all shadow-lg shadow-indigo-200"
        >
          Get Started
        </a>
      </li>
    </ul>
  </div>
</nav>

<script>
  const nav = document.getElementById("main-navbar");
  const mobileBtn = document.getElementById("mobile-menu-btn");
  const mobileMenu = document.getElementById("mobile-menu");

  // Toggle Mobile Menu
  mobileBtn?.addEventListener("click", () => {
    mobileMenu?.classList.toggle("translate-x-full");

    // Toggle body scroll
    if (mobileMenu?.classList.contains("translate-x-full")) {
      document.body.style.overflow = "";
    } else {
      document.body.style.overflow = "hidden";
    }
  });

  const updateNav = () => {
    if (window.scrollY > 20) {
      nav?.classList.remove("bg-transparent");
      nav?.classList.add("bg-white", "shadow-sm");
    } else {
      nav?.classList.add("bg-transparent");
      nav?.classList.remove("bg-white", "shadow-sm");
    }
  };

  window.addEventListener("scroll", updateNav);
  // Initial check
  updateNav();
</script>
